// Test: single thread function call adding 10
// Expected: 10

shared counter: int = 0;

fn worker() {
  let i: int = 0;
  while i < 10 {
    atomic.add(counter, 1);
    i = i + 1;
  }
}

fn main() -> int {
  worker();
  return atomic.load(counter);
}
